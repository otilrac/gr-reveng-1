options:
  parameters:
    author: ''
    category: Custom
    cmake_opt: ''
    comment: 'This flowgraph builds a simple packet, and sends

      it through the Deframer. Try modifying the

      packet structure and parameters to test your

      understanding of how the deframer works!'
    copyright: ''
    description: ''
    gen_cmake: 'On'
    gen_linking: dynamic
    generate_options: qt_gui
    hier_block_src_path: '.:'
    id: reveng_simple_test
    max_nouts: '0'
    output_language: python
    placement: (0,0)
    qt_qss_theme: ''
    realtime_scheduling: ''
    run: 'True'
    run_command: '{python} -u {filename}'
    run_options: prompt
    sizing_mode: fixed
    thread_safe_setters: ''
    title: ''
    window_size: ''
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [8, 13]
    rotation: 0
    state: enabled

blocks:
- name: csum
  id: variable
  parameters:
    comment: 'A one byte checksum, not included in the length.

      (Set to 0x55 as a placeholder!)'
    value: '0x55'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [16, 620]
    rotation: 0
    state: enabled
- name: csum_bits
  id: variable
  parameters:
    comment: 'A one byte checksum, not included in the length.

      Each bit is represented by an X''s.

      (reveng works with symbols!)'
    value: list(map(int, bin(csum)[2:].zfill(8)))
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [336, 620]
    rotation: 0
    state: enabled
- name: msg
  id: variable
  parameters:
    comment: The message to send.
    value: '"Hello world!"'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [16, 516]
    rotation: 0
    state: enabled
- name: msg_bits
  id: variable
  parameters:
    comment: ''
    value: list(map(int, bin(int(hex(msg.encode()), 16))[2:].zfill(8 * pktlen)))
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [336, 516]
    rotation: 0
    state: enabled
- name: pktlen
  id: variable
  parameters:
    comment: 'How many bytes to transmit in the

      data section.'
    value: len(msg)
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [16, 396]
    rotation: 0
    state: enabled
- name: pktlen_bits
  id: variable
  parameters:
    comment: ''
    value: list(map(int, bin(pktlen )[2:].zfill(8)))
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [336, 396]
    rotation: 0
    state: enabled
- name: samp_rate
  id: variable
  parameters:
    comment: ''
    value: '32000'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [184, 13]
    rotation: 0
    state: enabled
- name: sync_word
  id: variable
  parameters:
    comment: ChipCon likes 0xd391!
    value: '0xd391'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [16, 188]
    rotation: 0
    state: enabled
- name: sync_word_bits
  id: variable
  parameters:
    comment: ''
    value: list(map(int, bin(sync_word)[2:].zfill(16)))
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [336, 188]
    rotation: 0
    state: enabled
- name: transmitter_id
  id: variable
  parameters:
    comment: The transmitter ID is 0xdeadbeef
    value: '0xdeadbeef'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [16, 292]
    rotation: 0
    state: enabled
- name: transmitter_id_bits
  id: variable
  parameters:
    comment: ''
    value: list(map(int, bin(transmitter_id)[2:].zfill(32)))
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [336, 284]
    rotation: 0
    state: enabled
- name: blocks_message_debug_0
  id: blocks_message_debug
  parameters:
    affinity: ''
    alias: ''
    comment: 'Remember, each "byte" on screen is actually

      a bit!'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [1000, 17]
    rotation: 0
    state: enabled
- name: blocks_throttle_0
  id: blocks_throttle
  parameters:
    affinity: ''
    alias: ''
    comment: ''
    ignoretag: 'True'
    maxoutbuf: '0'
    minoutbuf: '0'
    samples_per_second: samp_rate
    type: byte
    vlen: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [560, 76]
    rotation: 0
    state: enabled
- name: blocks_vector_source_x_0
  id: blocks_vector_source_x
  parameters:
    affinity: ''
    alias: ''
    comment: Modify the packet structure here!
    maxoutbuf: '0'
    minoutbuf: '0'
    repeat: 'True'
    tags: '[]'
    type: byte
    vector: sync_word_bits + transmitter_id_bits + pktlen_bits + msg_bits + csum_bits
      + [0]*10000
    vlen: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [328, 60]
    rotation: 0
    state: enabled
- name: import_0
  id: import
  parameters:
    alias: ''
    comment: ''
    imports: from binascii import hexlify as hex
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [680, 256.0]
    rotation: 0
    state: true
- name: note_0
  id: note
  parameters:
    alias: ''
    comment: "***********************************\n* MESSAGE DEBUG PRINT PDU VERBOSE\
      \ *\n((ts . 1.50074e+09) (packed . #f) (name . RevengTestSrc))\npdu_length =\
      \ 144\ncontents = \n0000: 01 01 00 01 01 01 01 00 01 00 01 00 01 01 00 01 \n\
      0010: 01 00 01 01 01 01 01 00 01 01 01 00 01 01 01 01 \n0020: 00 00 00 00 01\
      \ 01 00 00 00 01 00 00 01 00 00 00 \n0030: 00 01 01 00 00 01 00 01 00 01 01\
      \ 00 01 01 00 00 \n0040: 00 01 01 00 01 01 00 00 00 01 01 00 01 01 01 01 \n\
      0050: 00 00 01 00 00 00 00 00 00 01 01 01 00 01 01 01 \n0060: 00 01 01 00 01\
      \ 01 01 01 00 01 01 01 00 00 01 00 \n0070: 00 01 01 00 01 01 00 00 00 01 01\
      \ 00 00 01 00 00 \n0080: 00 00 01 00 00 00 00 01 00 01 00 01 00 01 00 01 \n\
      ***********************************\n\n0000 - 0010: 0xdeadbeef, in bit form\n\
      0020: The length byte, and the start of the message\n0088: The end of the message,\
      \ and the checksum"
    note: ''
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [880, 364]
    rotation: 0
    state: enabled
- name: reveng_packet_deframer_0
  id: reveng_packet_deframer
  parameters:
    affinity: ''
    alias: ''
    big_endian: 'True'
    comment: ''
    encoding: none
    fixed_len: 'False'
    max_len: '0'
    maxoutbuf: '0'
    minoutbuf: '0'
    msb: 'True'
    name: RevengTestSrc
    pack_bytes: 'False'
    pkt_len: '2'
    pkt_len_adj: '1'
    pkt_len_offset: '4'
    sync: sync_word_bits
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [744, 44.0]
    rotation: 0
    state: enabled
- name: reveng_packet_formatter_0
  id: reveng_packet_formatter
  parameters:
    affinity: ''
    alias: ''
    append: 'False'
    comment: The new Packet Formatter object!
    file_name: ''
    flush: 'True'
    format_str: '%(name)\nFull Packet: %(hex)\ntransmitter_id: %(hex[0:32])\nPacket
      Length: %(int[32:40])\nMessage: %(ascii[40:-8])\nChecksum: %(hex[-8:])\n'
    log_to: '"stdout"'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [1000, 188]
    rotation: 0
    state: enabled

connections:
- [blocks_throttle_0, '0', reveng_packet_deframer_0, '0']
- [blocks_vector_source_x_0, '0', blocks_throttle_0, '0']
- [reveng_packet_deframer_0, out, blocks_message_debug_0, print_pdu]
- [reveng_packet_deframer_0, out, reveng_packet_formatter_0, pdus]

metadata:
  file_format: 1
